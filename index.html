<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>React Structurizer MVP</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; max-width: 900px; margin: 0 auto; }
    h2 { margin-top: 0; }
    label { display: block; margin-top: 12px; font-weight: bold; }
    input[type="text"] { padding: 8px; width: 300px; box-sizing: border-box; }
    textarea { width: 100%; height: 300px; padding: 10px; box-sizing: border-box; font-family: monospace; font-size: 13px; }
    button { padding: 10px 20px; margin-top: 16px; cursor: pointer; background: #1976d2; color: #fff; border: none; border-radius: 4px; font-size: 14px; }
    button:hover { background: #1565c0; }
    #errorMsg { color: #c00; margin-top: 12px; padding: 10px; background: #ffebee; border-radius: 4px; display: none; }
    #errorMsg code { background: #fff; padding: 2px 6px; border-radius: 2px; }
    .extra-packages { display: flex; flex-wrap: wrap; gap: 10px 16px; margin-top: 8px; }
    .extra-packages label { margin-top: 0; font-weight: normal; display: inline-flex; align-items: center; gap: 6px; cursor: pointer; }
    .extra-packages input[type="checkbox"] { margin: 0; }
    #progressWrap { margin-top: 16px; display: none; }
    #progressWrap.visible { display: block; }
    #progressBar { height: 24px; background: #e0e0e0; border-radius: 12px; overflow: hidden; }
    #progressFill { height: 100%; width: 0%; background: #1976d2; border-radius: 12px; transition: width 0.2s ease; }
    #progressText { margin-top: 6px; font-size: 14px; color: #666; }
  </style>
</head>
<body>

  <h2>React Structurizer MVP</h2>
  <p style="color:#666; font-size:14px; margin-bottom:16px;">React 컴포넌트 코드를 붙여넣으면 Vite + React 프로젝트 구조의 ZIP을 생성합니다. GitHub에 올려 <code>npm install && npm run dev</code>로 바로 실행할 수 있습니다.</p>

  <div style="background:#e3f2fd; border:1px solid #90caf9; border-radius:8px; padding:12px 16px; margin-bottom:16px; font-size:13px;">
    <strong>이 앱 실행 방법</strong>
    <ul style="margin:8px 0 0 0; padding-left:20px;">
      <li><strong>Node.js 설치됨:</strong> 터미널에서 <code>npm start</code> → 브라우저에서 http://localhost:3000 접속</li>
      <li><strong>Node.js 없음:</strong> <a href="https://nodejs.org/ko" target="_blank" rel="noopener">Node.js 설치</a> 후 위 방법 사용. 또는 Python이 있으면 <code>python -m http.server 3000</code> 실행 후 http://localhost:3000 접속</li>
    </ul>
    <p style="margin:8px 0 0 0; color:#1565c0;"><strong>생성된 ZIP 실행 시:</strong> 압축 해제 후 <code>run.bat</code> 실행. npm이 없으면 “npm이 설치되어 있지 않습니다” 메시지와 Node.js 설치 링크가 표시됩니다.</p>
  </div>

  <label for="projectName">프로젝트 이름 (폴더명):</label>
  <input type="text" id="projectName" value="generated-react-app" />

  <label for="codeArea">메인 React 컴포넌트 코드:</label>
  <textarea id="codeArea" placeholder="import React, { useState } from 'react';\nimport { Icon } from 'lucide-react';\n\nexport default function App() {\n  return <div>Hello</div>;\n}\n\n→ 위처럼 import 포함한 전체 코드를 그대로 붙여넣으세요. 이 코드가 App.jsx로 들어가 메인 컴포넌트가 됩니다. 비워두면 기본 앱이 들어갑니다."></textarea>

  <label>추가 npm 패키지 (필요한 것만 선택):</label>
  <div class="extra-packages" id="extraPackages">
    <label><input type="checkbox" name="extraPkg" value="lucide-react" /> lucide-react</label>
    <label><input type="checkbox" name="extraPkg" value="react-router-dom" /> react-router-dom</label>
    <label><input type="checkbox" name="extraPkg" value="axios" /> axios</label>
    <label><input type="checkbox" name="extraPkg" value="zustand" /> zustand</label>
    <label><input type="checkbox" name="extraPkg" value="react-hook-form" /> react-hook-form</label>
    <label><input type="checkbox" name="extraPkg" value="date-fns" /> date-fns</label>
    <label><input type="checkbox" name="extraPkg" value="clsx" /> clsx</label>
    <label><input type="checkbox" name="extraPkg" value="framer-motion" /> framer-motion</label>
    <label><input type="checkbox" name="extraPkg" value="recharts" /> recharts</label>
    <label><input type="checkbox" name="extraPkg" value="react-dropzone" /> react-dropzone</label>
  </div>

  <div style="margin-top:12px;">
    <label style="display:inline-flex; align-items:center; gap:8px; cursor:pointer;">
      <input type="checkbox" id="tailwindInclude" checked />
      <span>Tailwind CSS 포함 (className 스타일 사용 시 체크, 기본 권장)</span>
    </label>
  </div>

  <button type="button" onclick="generateProject()">Generate ZIP (GitHub용 프로젝트 생성)</button>
  <div id="progressWrap">
    <div id="progressBar"><div id="progressFill"></div></div>
    <div id="progressText">0%</div>
  </div>
  <div id="errorMsg" role="alert"></div>

  <script src="app.js"></script>

</body>
</html>
